{
  "ignition": {
    "version": "3.4.0"
  },
  "passwd": {
    "users": [
      {
        "name": "core",
        "sshAuthorizedKeys": [
          "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAICswtcs9katJaGzwiWWot7BWx596MjHNjo8K7zxONpXV"
        ]
      }
    ]
  },
  "storage": {
    "directories": [
      {
        "overwrite": true,
        "path": "/opt/k8s/volumes",
        "mode": 511
      }
    ],
    "files": [
      {
        "path": "/etc/hostname",
        "contents": {
          "compression": "",
          "source": "data:,ada1.lan"
        },
        "mode": 420
      },
      {
        "path": "/etc/rancher/k3s/config.yaml.d/00_common.yaml",
        "contents": {
          "compression": "",
          "source": "data:,%23%20common%20configs%20used%20by%20both%20agents%20and%20servers%0Anode-name%3A%20%22ada1%22%0Atoken%3A%20L3PF5nMfAZ9dZFbt%0Akubelet-arg%3A%0A%20%20-%20%22--config-dir%3D%2Fetc%2Fkubernetes%2Fkubelet.conf.d%22%0A"
        },
        "mode": 420
      },
      {
        "path": "/etc/rancher/k3s/server-config.yaml",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/4zRz47aMBAG8Luf4lO47Eqb/xFFvrYXbqhvMIknYMXYyOMQ8fZVgNJdtYceZ2x//nm8wRD8aI+CMUQIxytH+GBY1OZLCTmF2RnI7eysn5BOVjBax0gBJaehjOSHE8dyaqV8hBY3OjullmgT59Pc86Odn4Nhjazadl2m1Ab7w7Ur94frFp7TEuKE7/sfP2VNnoXvsksw2B8Eb4ZHml3SqKuia4qqqMp6+64GN0vimA/WRI3s8+JHQ1Wj6+1OdzvzTZMh3TVal7sqU69z1tukkeLM/wlaZ2MH/geqfaGeez6j2heqqmpt+t3D02pd1nWTKZWc5EJeIyNDdeHI30c0tesP2Iv8vtj1H+jnhIWxkE8rzXpJ5BzIw/UIcxR2Vxa8nXnt9+9fcghPNVIkHu0E64+RRf7KXZ+cTgzPC0ccKfFCN9DFKmOFesdaAfkf2L16hqpfAQAA//++aQjUYQIAAA=="
        },
        "mode": 420
      },
      {
        "path": "/etc/rancher/k3s/agent-config.yaml",
        "contents": {
          "compression": "",
          "source": "data:;base64,IyBjb25maWdzIGZvciBhZ2VudCBub2RlcwojIGFnZW50IG5vZGVzIHNob3VsZCBzeW1saW5rIHRoaXMgZmlsZSB0byAvZXRjL3JhbmNoZXIvazNzL2NvbmZpZy55YW1sCnNlcnZlcjogaHR0cHM6Ly9hZGEwLmxhbjo2NDQzCg=="
        },
        "mode": 420
      },
      {
        "path": "/etc/kubernetes/kubelet.conf.d/001-kubelet.conf",
        "contents": {
          "compression": "",
          "source": "data:,apiVersion%3A%20kubelet.config.k8s.io%2Fv1%0Akind%3A%20KubeletConfiguration%0AshutdownGracePeriod%3A%20%2245s%22%0AshutdownGracePeriodCriticalPods%3A%20%2215s%22%0A"
        },
        "mode": 420
      },
      {
        "path": "/etc/systemd/system/rpm-ostree-install-nfs.service",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/3SRP2/jMAzFd30K33Cj4uFmDZc2Q4GiKJoWHYIMsszERGRSIOkk7qcvnCBN0T8j35OefnpcvRDa2t2CJsFiyBTu4whS0Ub9YJi1OqB1lZTes5oAuNdIpoHADiw7z5SRYGZRtmDu/8ZAfvHmsGGB8IaUouFMQfaY4CLv/ukPko9bIPswbphanCAfo3WLI6pp+FPvo9QZm/rvw0wt9sW51fJ8Ye2exwKBCbRjc0/QR6QT4+KIFkZQtzhCWloUC/WgUjdI9fWvFZJazLnyPpaSR59xD9OQMx88Ukw2CdeuVLX104htH8vn8CnYeEhd9Z33yzEd1aBPNj1L7JvMaVcJNMzm3OrujLQ+7QHa+Rj6IRv6QUEuVb8HAAD//1igeuHWAQAA"
        },
        "mode": 420
      },
      {
        "path": "/etc/systemd/system/node-k3s-setup@.service",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/3SRQWvcMBCF7/oV04CPsg57K+iQpD6ELKF0U1pYlqBox/ZgeWQ043Rd+uPLJm0orHsT7/t4Qnr7r0x6MJ9QYqFJKbO/3wjEzC11IKjzBG0uUBGUnNDcZj7SWfsctG9OJCrevYTiEj07zke0JLaiVe/Du1g92Ipq0TBO5ltgFc+oP3IZbOZEjLWG0qGa61ax/IfdYJsL+p/EMSjVguWFIv6Nh42sRDZ0yPoOzH73djqYx2VCnxmlz2q+4BiIXy9vTqR+QTHNCeNOQ1HvZinumdiNw5EK2AkcanQlcOyxuGGzKicGK+2F6iqyb59dL2FMl/wfuFYb55LOxVvoVSf56FyHWp9fTxl+wd3D7vF6u3263+yemu/Nrb+q6AqkBytg1/o0z7GH1aHM/o5FQ0qH183weLP4cU5KdhYsf2YBML8DAAD//xaWuc5TAgAA"
        },
        "mode": 420
      }
    ]
  },
  "systemd": {
    "units": [
      {
        "enabled": true,
        "name": "rpm-ostree-install-nfs.service"
      },
      {
        "enabled": true,
        "name": "node-k8s-setup@server.service"
      },
      {
        "enabled": true,
        "name": "node-k8s-setup@agent.service"
      }
    ]
  }
}
